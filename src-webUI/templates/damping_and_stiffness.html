{% extends "base.html" %} {% block title %}Damping and Stiffness -
pyFluidBearing{% endblock %} {% block content %}
<div class="mb-8">
    <div class="flex items-center gap-3 mb-2">
        <div
            class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"
        >
            <svg
                class="w-5 h-5 text-primary-600"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                />
            </svg>
        </div>
        <div>
            <h1 class="text-2xl font-semibold text-slate-900 tracking-tight">
                Stiffness & Damping Coefficients
            </h1>
            <p class="text-slate-500 text-sm">
                Compute bearing K and C matrices using analytical methods
            </p>
        </div>
    </div>
</div>

<!-- Friswell K and C Calculator -->
<section class="bg-white rounded-xl border border-slate-200 p-6 mb-6">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-slate-900">Friswell Method</h2>
        <span
            class="text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded"
            >Short Journal Bearing</span
        >
    </div>

    <!-- Mode Toggle -->
    <div class="mb-4 p-3 bg-slate-50 rounded-lg border border-slate-100">
        <div class="flex items-center gap-6">
            <span
                class="text-xs font-medium text-slate-500 uppercase tracking-wider"
                >Mode:</span
            >
            <label class="inline-flex items-center cursor-pointer">
                <input
                    type="radio"
                    name="friswell-mode"
                    value="single"
                    checked
                    class="form-radio text-primary-600 focus:ring-primary-500"
                    onchange="window.calculatorApp.toggleFriswellMode('single')"
                />
                <span class="ml-2 text-sm text-slate-700">Single Value</span>
            </label>
            <label class="inline-flex items-center cursor-pointer">
                <input
                    type="radio"
                    name="friswell-mode"
                    value="range"
                    class="form-radio text-primary-600 focus:ring-primary-500"
                    onchange="window.calculatorApp.toggleFriswellMode('range')"
                />
                <span class="ml-2 text-sm text-slate-700">Range Plot</span>
            </label>
        </div>
    </div>

    <!-- Range Plot Options (hidden by default) -->
    <div
        id="friswell-range-options"
        class="hidden mb-4 p-4 bg-primary-50 rounded-lg border border-primary-100"
    >
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">
                    Sweep Parameter
                </label>
                <select
                    id="friswell-sweep-param"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                    onchange="window.calculatorApp.updateSweepDefaults()"
                >
                    <option
                        value="omega"
                        data-min="500"
                        data-max="5000"
                        data-unit="RPM"
                    >
                        ω (Shaft speed) [RPM]
                    </option>
                    <option
                        value="f"
                        data-min="100"
                        data-max="2000"
                        data-unit="N"
                    >
                        f (Static load) [N]
                    </option>
                    <option
                        value="D"
                        data-min="50"
                        data-max="200"
                        data-unit="mm"
                    >
                        D (Diameter) [mm]
                    </option>
                    <option
                        value="L"
                        data-min="10"
                        data-max="100"
                        data-unit="mm"
                    >
                        L (Length) [mm]
                    </option>
                    <option
                        value="c"
                        data-min="0.05"
                        data-max="0.5"
                        data-unit="mm"
                    >
                        c (Radial clearance) [mm]
                    </option>
                    <option
                        value="eta"
                        data-min="0.01"
                        data-max="0.5"
                        data-unit="Pa·s"
                    >
                        η (Viscosity) [Pa·s]
                    </option>
                </select>
            </div>
            <div>
                <label
                    id="friswell-sweep-min-label"
                    class="block text-sm font-medium text-slate-700 mb-1"
                >
                    Min Value [RPM]
                </label>
                <input
                    type="number"
                    id="friswell-sweep-min"
                    step="any"
                    value="500"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    id="friswell-sweep-max-label"
                    class="block text-sm font-medium text-slate-700 mb-1"
                >
                    Max Value [RPM]
                </label>
                <input
                    type="number"
                    id="friswell-sweep-max"
                    step="any"
                    value="5000"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">
                    Points
                </label>
                <input
                    type="number"
                    id="friswell-sweep-points"
                    step="1"
                    value="50"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
        </div>
    </div>

    <form id="friswell-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label
                    for="friswell-omega"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Shaft speed (ω) [RPM]</label
                >
                <input
                    type="number"
                    id="friswell-omega"
                    step="any"
                    value="1500"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="friswell-D"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Diameter (D) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-D"
                    step="any"
                    value="100"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="friswell-L"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Length (L) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-L"
                    step="any"
                    value="30"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="friswell-f"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Static load (f) [N]</label
                >
                <input
                    type="number"
                    id="friswell-f"
                    step="any"
                    value="525"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="friswell-c"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Radial clearance (c) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-c"
                    step="any"
                    value="0.1"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="friswell-eta"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Viscosity (η) [Pa·s]</label
                >
                <input
                    type="number"
                    id="friswell-eta"
                    step="any"
                    value="0.1"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
        </div>
        <div class="flex gap-3">
            <button
                type="submit"
                id="friswell-calc-btn"
                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Calculate K and C
            </button>
            <button
                type="button"
                id="friswell-plot-btn"
                class="hidden bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Generate Plot
            </button>
        </div>
    </form>
    <div id="friswell-result" class="hidden mt-6">
        <div class="border-t border-slate-200 pt-6">
            <h3
                class="text-sm font-semibold text-slate-900 uppercase tracking-wider mb-3"
            >
                Results
            </h3>
            <div
                id="friswell-result-content"
                class="bg-slate-50 p-4 rounded-lg border border-slate-100 font-mono text-sm"
            ></div>
        </div>
    </div>
    <div id="friswell-plot-container" class="hidden mt-6">
        <div class="border-t border-slate-200 pt-6">
            <h3
                class="text-sm font-semibold text-slate-900 uppercase tracking-wider mb-3"
            >
                Parameter Sweep
            </h3>
            <div
                class="bg-slate-50 rounded-lg border border-slate-100 p-4 overflow-x-auto"
            >
                <svg id="friswell-plot" width="1200" height="700"></svg>
            </div>
        </div>
    </div>
</section>

<!-- Al-Bender K and C Calculator -->
<section class="bg-white rounded-xl border border-slate-200 p-6 mb-6">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-slate-900">Al-Bender Method</h2>
        <span
            class="text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded"
            >Dimensionless</span
        >
    </div>
    <form id="albender-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="md:col-span-2">
                <label
                    for="albender-lambda"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Frequency parameter (Λ) - comma separated for multiple
                    values (e.g., 0.1, 1, 5, 10, 100, 1000)</label
                >
                <input
                    type="text"
                    id="albender-lambda"
                    value="0.1, 1, 5, 10, 100, 1000"
                    required
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-min"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Sigma min (log scale)</label
                >
                <input
                    type="number"
                    id="albender-sigma-min"
                    step="any"
                    value="-1"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-max"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Sigma max (log scale)</label
                >
                <input
                    type="number"
                    id="albender-sigma-max"
                    step="any"
                    value="3"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-points"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >Number of sigma points</label
                >
                <input
                    type="number"
                    id="albender-sigma-points"
                    step="1"
                    value="10000"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
            <div>
                <label
                    for="albender-ld"
                    class="block text-sm font-medium text-slate-700 mb-1"
                    >L/D ratio</label
                >
                <input
                    type="number"
                    id="albender-ld"
                    step="any"
                    value="1.0"
                    class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
            </div>
        </div>
        <div class="flex gap-3">
            <button
                type="submit"
                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Calculate K and C
            </button>
            <button
                type="button"
                id="albender-plot-btn"
                class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Generate Plot
            </button>
        </div>
    </form>
    <div id="albender-result" class="hidden mt-6">
        <div class="border-t border-slate-200 pt-6">
            <h3
                class="text-sm font-semibold text-slate-900 uppercase tracking-wider mb-3"
            >
                Results
            </h3>
            <div
                id="albender-result-content"
                class="bg-slate-50 p-4 rounded-lg border border-slate-100 font-mono text-sm"
            ></div>
        </div>
    </div>
    <div id="albender-plot-container" class="hidden mt-6">
        <div class="border-t border-slate-200 pt-6">
            <h3
                class="text-sm font-semibold text-slate-900 uppercase tracking-wider mb-3"
            >
                Coefficient Curves
            </h3>
            <div
                class="bg-slate-50 rounded-lg border border-slate-100 p-4 overflow-x-auto"
            >
                <svg id="albender-plot" width="1000" height="800"></svg>
            </div>
        </div>
    </div>
</section>

{% endblock %} {% block scripts %}
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
{% endblock %}
