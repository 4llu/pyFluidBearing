{% extends "base.html" %} {% block title %}Damping and Stiffness -
pyFluidBearing{% endblock %} {% block content %}
<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">
        Fluid Bearing Stiffness and Damping Calculator
    </h1>
    <p class="text-gray-600">
        Calculate bearing coefficients using Friswell or Al-Bender methods
    </p>
</div>

<!-- Friswell K and C Calculator -->
<section class="bg-white rounded-lg shadow-md p-6 mb-8">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Friswell Method</h2>

    <!-- Mode Toggle -->
    <div class="mb-4 p-3 bg-gray-50 rounded-md">
        <div class="flex items-center gap-6">
            <span class="text-sm font-medium text-gray-700">Mode:</span>
            <label class="inline-flex items-center">
                <input
                    type="radio"
                    name="friswell-mode"
                    value="single"
                    checked
                    class="form-radio text-blue-600"
                    onchange="window.calculatorApp.toggleFriswellMode('single')"
                />
                <span class="ml-2 text-sm text-gray-700">Single Value</span>
            </label>
            <label class="inline-flex items-center">
                <input
                    type="radio"
                    name="friswell-mode"
                    value="range"
                    class="form-radio text-blue-600"
                    onchange="window.calculatorApp.toggleFriswellMode('range')"
                />
                <span class="ml-2 text-sm text-gray-700">Range Plot</span>
            </label>
        </div>
    </div>

    <!-- Range Plot Options (hidden by default) -->
    <div
        id="friswell-range-options"
        class="hidden mb-4 p-4 bg-blue-50 rounded-md border border-blue-200"
    >
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    Sweep Parameter
                </label>
                <select
                    id="friswell-sweep-param"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    onchange="window.calculatorApp.updateSweepDefaults()"
                >
                    <option
                        value="omega"
                        data-min="500"
                        data-max="5000"
                        data-unit="RPM"
                    >
                        ω (Shaft speed) [RPM]
                    </option>
                    <option
                        value="f"
                        data-min="100"
                        data-max="2000"
                        data-unit="N"
                    >
                        f (Static load) [N]
                    </option>
                    <option
                        value="D"
                        data-min="50"
                        data-max="200"
                        data-unit="mm"
                    >
                        D (Diameter) [mm]
                    </option>
                    <option
                        value="L"
                        data-min="10"
                        data-max="100"
                        data-unit="mm"
                    >
                        L (Length) [mm]
                    </option>
                    <option
                        value="c"
                        data-min="0.05"
                        data-max="0.5"
                        data-unit="mm"
                    >
                        c (Radial clearance) [mm]
                    </option>
                    <option
                        value="eta"
                        data-min="0.01"
                        data-max="0.5"
                        data-unit="Pa·s"
                    >
                        η (Viscosity) [Pa·s]
                    </option>
                </select>
            </div>
            <div>
                <label
                    id="friswell-sweep-min-label"
                    class="block text-sm font-medium text-gray-700 mb-1"
                >
                    Min Value [RPM]
                </label>
                <input
                    type="number"
                    id="friswell-sweep-min"
                    step="any"
                    value="500"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    id="friswell-sweep-max-label"
                    class="block text-sm font-medium text-gray-700 mb-1"
                >
                    Max Value [RPM]
                </label>
                <input
                    type="number"
                    id="friswell-sweep-max"
                    step="any"
                    value="5000"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    Points
                </label>
                <input
                    type="number"
                    id="friswell-sweep-points"
                    step="1"
                    value="50"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
        </div>
    </div>

    <form id="friswell-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label
                    for="friswell-omega"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Shaft speed (ω) [RPM]</label
                >
                <input
                    type="number"
                    id="friswell-omega"
                    step="any"
                    value="1500"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="friswell-D"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Diameter (D) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-D"
                    step="any"
                    value="100"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="friswell-L"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Length (L) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-L"
                    step="any"
                    value="30"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="friswell-f"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Static load (f) [N]</label
                >
                <input
                    type="number"
                    id="friswell-f"
                    step="any"
                    value="525"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="friswell-c"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Radial clearance (c) [mm]</label
                >
                <input
                    type="number"
                    id="friswell-c"
                    step="any"
                    value="0.1"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="friswell-eta"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Viscosity (η) [Pa·s]</label
                >
                <input
                    type="number"
                    id="friswell-eta"
                    step="any"
                    value="0.1"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
        </div>
        <div class="flex gap-3">
            <button
                type="submit"
                id="friswell-calc-btn"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Calculate K and C
            </button>
            <button
                type="button"
                id="friswell-plot-btn"
                class="hidden bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Generate Plot
            </button>
        </div>
    </form>
    <div id="friswell-result" class="hidden mt-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Results:</h3>
        <div
            id="friswell-result-content"
            class="bg-gray-50 p-4 rounded-md"
        ></div>
    </div>
    <div id="friswell-plot-container" class="hidden mt-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Plot:</h3>
        <svg id="friswell-plot" width="1200" height="700"></svg>
    </div>
</section>

<!-- Al-Bender K and C Calculator -->
<section class="bg-white rounded-lg shadow-md p-6 mb-8">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Al-Bender Method</h2>
    <form id="albender-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="md:col-span-2">
                <label
                    for="albender-lambda"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Frequency parameter (Λ) - comma separated for multiple
                    values (e.g., 0.1, 1, 5, 10, 100, 1000)</label
                >
                <input
                    type="text"
                    id="albender-lambda"
                    value="0.1, 1, 5, 10, 100, 1000"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-min"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Sigma min (log scale)</label
                >
                <input
                    type="number"
                    id="albender-sigma-min"
                    step="any"
                    value="-1"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-max"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Sigma max (log scale)</label
                >
                <input
                    type="number"
                    id="albender-sigma-max"
                    step="any"
                    value="3"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="albender-sigma-points"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Number of sigma points</label
                >
                <input
                    type="number"
                    id="albender-sigma-points"
                    step="1"
                    value="10000"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            <div>
                <label
                    for="albender-ld"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >L/D ratio</label
                >
                <input
                    type="number"
                    id="albender-ld"
                    step="any"
                    value="1.0"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
        </div>
        <div class="flex gap-3">
            <button
                type="submit"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Calculate K and C
            </button>
            <button
                type="button"
                id="albender-plot-btn"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-md transition"
            >
                Generate Plot
            </button>
        </div>
    </form>
    <div id="albender-result" class="hidden mt-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Results:</h3>
        <div
            id="albender-result-content"
            class="bg-gray-50 p-4 rounded-md"
        ></div>
    </div>
    <div id="albender-plot-container" class="hidden">
        <svg id="albender-plot" width="1000" height="800"></svg>
    </div>
</section>

{% endblock %} {% block scripts %}
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
{% endblock %}
